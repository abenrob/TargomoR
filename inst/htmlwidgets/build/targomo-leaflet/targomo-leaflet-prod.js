tgm.leaflet=function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){!function(t,e,n){"use strict";var i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function r(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o,s,a=function(){return(a=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},u=(o=.5/Math.PI,s=-.5/Math.PI,function(t,e,n){return void 0===n&&(n=1),{x:t=n*(o*t+.5),y:e=n*(s*e+.5)}});function c(t,e,n){return void 0===n&&(n=1),u(t/6378137,e/6378137,n)}var l=function(){function t(t){this.southWest=new h(1/0,1/0),this.northEast=new h(-1/0,-1/0),t&&(this.southWest=new h(t.southWest.x,t.southWest.y),this.northEast=new h(t.northEast.x,t.northEast.y))}return t.prototype.expandPoint=function(t,e){this.southWest.x=Math.min(this.southWest.x,t),this.northEast.x=Math.max(this.northEast.x,t),this.southWest.y=Math.min(this.southWest.y,e),this.northEast.y=Math.max(this.northEast.y,e)},t.prototype.expand=function(t){this.expandPoint(t.northEast.x,t.northEast.y),this.expandPoint(t.southWest.x,t.southWest.y)},t.prototype.modifyIntersect=function(t){return this.southWest.x=Math.max(this.southWest.x,t.southWest.x),this.northEast.x=Math.min(this.northEast.x,t.northEast.x),this.southWest.y=Math.max(this.southWest.y,t.southWest.y),this.northEast.y=Math.min(this.northEast.y,t.northEast.y),this},t.prototype.contains=function(t){return this.northEast.x>=t.northEast.x&&this.northEast.y>=t.northEast.y&&this.southWest.x<=t.southWest.x&&this.southWest.y<=t.southWest.y},t.prototype.intersects=function(t){return!(this.northEast.x<t.southWest.x||this.northEast.y<t.southWest.y||this.southWest.x>t.northEast.x||this.southWest.y>t.northEast.y)},t.prototype.growOutwardsFactor=function(t){void 0===t&&(t=1);var e=(this.northEast.x-this.southWest.x)*t,n=(this.northEast.y-this.southWest.y)*t;return this.northEast.x+=e,this.northEast.y+=n,this.southWest.x-=e,this.southWest.y-=n,this},t.prototype.growOutwardsAmount=function(t){return this.northEast.x+=t,this.northEast.y+=t,this.southWest.x-=t,this.southWest.y-=t,this},t.prototype.toLineString=function(){return[new h(this.southWest.x,this.northEast.y),new h(this.northEast.x,this.northEast.y),new h(this.northEast.x,this.southWest.y),new h(this.southWest.x,this.southWest.y)]},t.prototype.reproject=function(e){return new t({northEast:e(this.northEast.x,this.northEast.y),southWest:e(this.southWest.x,this.southWest.y)})},t}(),h=function(){function t(t,e){this.x=t,this.y=e}return t.prototype.isCollinear=function(t,e,n){if(t.x==e.x&&t.y==e.y)return!1;if(t.x==this.x&&this.x==e.x)return!0;if(t.y==this.y&&this.y==e.y)return!0;var i=t.x*(this.y-e.y)+this.x*(e.y-t.y)+e.x*(t.y-this.y);return i<n&&-n<i&&t.x!=e.x&&t.y!=e.y},t.prototype.euclideanDistance=function(t){return Math.sqrt(Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2))},t}(),p=function(t){var e=this;this.bounds3857=new l,this.points=t.map(function(t){e.bounds3857.expandPoint(t[0],t[1]);var n=c(t[0],t[1],1);return new h(n.x,n.y)})},f=function(){function t(t){var e=this;this.bounds3857=new l,this.travelTime=t.travelTime,this.area=t.area,this.lineStrings=[new p(t.outerBoundary)],this.bounds3857.expand(this.lineStrings[0].bounds3857),t.innerBoundary&&t.innerBoundary.forEach(function(t){var n=new p(t);e.lineStrings.push(n),e.bounds3857.expand(n.bounds3857)})}return t.prototype.getOuterBoundary=function(){return this.lineStrings[0]},t.prototype.getInnerBoundary=function(){return this.lineStrings.slice(1)},t}(),d=function(){function t(t){var e=this;this.polygons={},this.bounds3857=new l,t.forEach(function(t){t.polygons.forEach(function(t){var n=new f(t);e.polygons[n.travelTime]=e.polygons[n.travelTime]||[],e.polygons[n.travelTime].push(n),e.bounds3857.expand(n.bounds3857)})})}return t.prototype.forEach=function(t){var e=this;Object.keys(this.polygons).map(function(t){return+t}).sort(function(t,e){return e-t}).forEach(function(n,i){return t(+n,e.polygons[n],i)})},t}(),y={};["#006837","#39B54A","#8CC63F","#F7931E","#F15A24","#C1272D"].forEach(function(t,e){y[300*(e+1)]=t});var g=function(){this.inverse=!1,this.colors=y,this.opacity=.5,this.strokeWidth=5},m=function(t){function e(e){var n=t.call(this)||this;return Object.assign(n,e),n}return r(e,t),e.prototype.getColorOpacity=function(t,e){var n,i=null;return i=this.colors instanceof Array?this.colors[e]:this.colors[t],(n=i)&&null!=n.color?{color:i.color||"#ccc",opacity:i.opacity||1}:{color:i||"#ccc",opacity:1}},e}(g),v=0,b=function(){function t(t,e){void 0===t&&(t=50),void 0===e&&(e=500),this.min=t,this.max=e}return t.prototype.schedule=function(t){var e=this,n=function(){clearTimeout(e.longTimeout),clearTimeout(e.shortTimeout),e.longTimeout=null,e.shortTimeout=null,t()};this.longTimeout||(this.longTimeout=setTimeout(n,this.max)),clearTimeout(this.shortTimeout),this.shortTimeout=setTimeout(n,this.min)},t}(),w=function(){function t(t,e){this.plugin=t,this.options=e,this.renderTimeout=new b}return t.prototype.getElement=function(){return this.divElement},t.prototype.draw=function(t){var e=this;void 0===t&&(t=!1),this.resize(),t?this.render():this.renderTimeout.schedule(function(){return e.render()})},t.prototype.resize=function(){if(this.divElement&&this.bounds){var t=this.plugin.getElementPixels(this.bounds),e=t.southWest,n=t.northEast,i=this.divElement;i.style.left=e.x+"px",i.style.top=n.y+"px",i.style.width=n.x-e.x+"px",i.style.height=e.y-n.y+"px"}},t.prototype.initElement=function(){var t=document.createElement("div");return t.style.borderStyle="none",t.style.borderWidth="0px",t.style.position="absolute",t.style.opacity=""+this.options.opacity||"0.5",this.divElement=t,this.divElement},t.prototype.onRemove=function(){this.divElement.parentNode.removeChild(this.divElement),this.divElement=null},t.prototype.setData=function(t){this.model=t?new d(t):null,this.render()},t.prototype.setInverse=function(t){this.options.inverse=t,this.render()},t.prototype.setColors=function(t){this.options.colors=t,this.render()},t.prototype.setOpacity=function(t){this.options.opacity=t,this.divElement&&(this.divElement.style.opacity=""+this.options.opacity||"0.5")},t.prototype.setStrokeWidth=function(t){this.options.strokeWidth=t,this.render()},t.prototype.boundsCalculation=function(t){var e=this.model,i=this.options.inverse,r=new l(this.plugin.getViewPort()),o=new l(r),s=new l(o).growOutwardsFactor(t).modifyIntersect(e.bounds3857);i&&(s.expand(r),s.growOutwardsFactor(t)),o.growOutwardsFactor(t);var a=n.geometry.webMercatorToLatLng(r.southWest,void 0),u=n.geometry.webMercatorToLatLng(r.northEast,void 0),c=this.plugin.getElementPixels({southWest:a,northEast:u}),h=Math.abs((r.northEast.x-r.southWest.x)/c.northEast.x-c.southWest.x);return s.growOutwardsAmount(this.options&&h*this.options.strokeWidth||0),{bounds:o,newBounds:s}},t.prototype.render=function(){if(this.divElement)if(this.model){var t=this.plugin.getZoom(),e=256*Math.pow(2,t);e=Math.min(1e7,e);var i=Math.min(5,Math.max(2,(t-12)/2)),r=this.boundsCalculation(i),o=r.bounds,s=r.newBounds,u=function(t,e,n,i,r){var o,s=c(e.southWest.x,e.southWest.y,n),u=c(e.northEast.x,e.northEast.y,n);u.y<s.y&&(o=[s.y,u.y],u.y=o[0],s.y=o[1]);var p=Math.floor(s.x),f=Math.floor(s.y),d=Math.ceil(u.x),y=Math.ceil(u.y),g=new l(t).reproject(c).toLineString();function m(t,e){return(e=function(t,e){var n,i,r,o,s=function(t){return(i.x-n.x)*(t.y-n.y)>(i.y-n.y)*(t.x-n.x)},a=function(){var t=new h(n.x-i.x,n.y-i.y),e=new h(r.x-o.x,r.y-o.y),s=n.x*i.y-n.y*i.x,a=r.x*o.y-r.y*o.x,u=1/(t.x*e.y-t.y*e.x);return new h((s*e.x-a*t.x)*u,(s*e.y-a*t.y)*u)},u=t;for(var c in n=e[e.length-1],e){i=e[c];var l=u;for(var p in u=[],r=l[l.length-1],l)s(o=l[p])?(s(r)||u.push(a()),u.push(o)):s(r)&&u.push(a()),r=o;n=i}return u}(e,g)).forEach(function(e,i){var r=(0<i?"L":"M")+" "+(Math.round(e.x*n)-p)+" "+(Math.round(e.y*n)-f);t.push(r)}),0<t.length&&t.push("z"),t}var b=[];i.forEach(function(e,n,i){var o,s,u=n.map(function(e){return(n=e,i=[],t.intersects(n.bounds3857)&&(m(i,n.getOuterBoundary().points),n.getInnerBoundary().forEach(function(e){t.intersects(e.bounds3857)&&m(i,e.points)})),i).join(" ");var n,i}).join(" ");if(0!=u.length){var c=r.getColorOpacity(e,i);b.push((o=u,"\n    <g style='opacity: "+(s=a({},c,{strokeWidth:r.strokeWidth,color:r.inverse?"black":c.color})).opacity+"'>\n      <path style='stroke: "+s.color+";\n            fill: "+s.color+";\n            stroke-opacity: "+s.opacity+";\n            stroke-width: "+s.strokeWidth+";\n            fill-opacity: "+s.opacity+"'\n\n            d='"+o+"'/>\n    </g>\n  "))}});var w,T,S,E,x=d-p,U=y-f;return r.inverse?(S="tgm:inverse:"+v++,'\n    <svg  height="100%" width="100%" viewbox="0 0 '+(w=x)+" "+(T=U)+"\"\n          style='opacity: 1; stroke-linejoin:round; stroke-linecap:round; fill-rule: evenodd'\n          xmlns='http://www.w3.org/2000/svg'>\n          <path style='mask: url(#mask_"+S+")' d='"+(E="M 0 0 L "+w+" 0 L "+w+" "+T+" L 0 "+T+" z")+"'/>\n          \n    <defs>\n      <mask id='mask_"+S+"'>\n          <path style='fill-opacity:1; stroke: white; fill:white;' d='"+E+"'/>\"\n          "+b.join("\n")+"\n      </mask>\n    </defs>\n  \n    </svg>"):'\n    <svg  height="100%" width="100%" viewbox="0 0 '+x+" "+U+"\"\n          style='opacity: 1; stroke-linejoin:round; stroke-linecap:round; fill-rule: evenodd'\n          xmlns='http://www.w3.org/2000/svg'>\n          "+b.join("\n")+"\n    </svg>"}(o,s,e,this.model,new m(this.options));this.divElement.innerHTML=u;var p=n.geometry.webMercatorToLatLng(s.southWest,void 0),f=n.geometry.webMercatorToLatLng(s.northEast,void 0);this.bounds={southWest:p,northEast:f},this.resize()}else this.divElement.innerHTML=""},t}(),T=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e}(g),S=function(t){function i(e){var n=t.call(this)||this;return n.readyPromise=new Promise(function(t){return n.readyResolve=t}),n.options=Object.assign(new T,e||{}),n}return r(i,t),i.prototype.setData=function(t){var e=this;this.readyPromise.then(function(){e.element&&e.element.setData(t)})},i.prototype.draw=function(){this.element&&(e.DomUtil.setTransform(this.element.getElement(),new e.Point(0,0),null),this.element.draw(!0))},i.prototype.onAdd=function(t){var i=this;this.element=new w({getZoom:function(){return t.getZoom()},getViewPort:function(){var e=t.getBounds();return new l({northEast:n.geometry.latLngToWebMercator({lng:e.getNorthEast().lng,lat:e.getNorthEast().lat}),southWest:n.geometry.latLngToWebMercator({lng:e.getSouthWest().lng,lat:e.getSouthWest().lat})})},getElementPixels:function(e){return{northEast:t.latLngToLayerPoint(e.northEast),southWest:t.latLngToLayerPoint(e.southWest)}}},this.options);var r=this.element.initElement();return r.style.transformOrigin="center",e.DomUtil.addClass(r,"leaflet-zoom-animated"),t.getPanes().overlayPane.appendChild(r),t.on("moveend",this.draw,this),t.on("resize",this.draw,this),t.on("zoomend",this.draw,this),this._map.options.zoomAnimation&&e.Browser.any3d&&t.on("zoomanim",function(n){if(i.element.bounds){var o=t.getZoomScale(n.zoom,t.getZoom()),s=t._latLngToNewLayerPoint(i.element.bounds.southWest,n.zoom,n.center).round(),a=t._latLngToNewLayerPoint(i.element.bounds.northEast,n.zoom,n.center).round(),u=t._latLngToNewLayerPoint(i.element.bounds.southWest,t.getZoom(),t.getCenter()).round(),c=t._latLngToNewLayerPoint(i.element.bounds.northEast,t.getZoom(),t.getCenter()).round(),l=(s.x+a.x)/2,h=(s.y+a.y)/2,p=(u.x+c.x)/2,f=(u.y+c.y)/2;e.DomUtil.setTransform(r,new e.Point(l-p,h-f),o)}}),this.readyResolve(),this.draw(),this},i.prototype.onRemove=function(){return this.element&&(this.element.onRemove(),this.element=null),this},i.prototype.setInverse=function(t){this.options.inverse=t,this.draw()},i.prototype.setColors=function(t){this.options.colors=t,this.draw()},i.prototype.setOpacity=function(t){this.options.opacity=t,this.element&&(this.element.getElement().style.opacity=null!=this.options.opacity?""+this.options.opacity:"0.5")},i.prototype.setStrokeWidth=function(t){this.options.strokeWidth=t,this.draw()},i}(e.Layer),E=function(t){function e(e,n,i){if(!n&&!e.basemaps.basemapsLookup[n])throw new Error("valid style name required to access Targomo basemap");var r="https://maps.targomo.com/styles/"+e.basemaps.basemapsLookup[n]+"/rendered/{z}/{x}/{y}.png?key="+e.serviceKey;return t.call(this,r,i)||this}return r(e,t),e.getTileLayerList=function(t){var n={};return t.basemaps.basemapNames.forEach(function(i){n[i]=new e(t,i,{})}),n},e}(e.TileLayer),x=function(){function t(t,e,n,i){this.tgmClient=t,this.sources=e,this.multigraphOptions=n,this.vectorTileoptions=i,this.createLayer()}return t.prototype.addTo=function(t){this.map=t,this.layer.addTo(t)},t.prototype.updateMultigraphOptions=function(t){this.multigraphOptions=t,this.createLayer()},t.prototype.updateVectorTileOptions=function(t){this.vectorTileoptions=t,this.createLayer()},t.prototype.updateSources=function(t){this.sources=t,this.createLayer()},t.prototype.createLayer=function(){this.map&&this.layer&&this.map.removeLayer(this.layer),this.layer=e.vectorGrid.protobuf(this.tgmClient.multigraph.getTiledMultigraphUrl(this.sources,this.multigraphOptions,"mvt"),this.vectorTileoptions),this.map&&this.layer&&this.layer.addTo(this.map)},t}();t.LeafletPolygonOverlayOptions=T,t.TgmLeafletPolygonOverlay=S,t.TgmLeafletTileLayer=E,t.TgmLeafletMultigraphTileLayer=x,Object.defineProperty(t,"__esModule",{value:!0})}(e,n(1),n(2))},function(t,e){t.exports=L},function(t,e,n){!function(t){"use strict";!function(t){if(!t.fetch){var e="URLSearchParams"in t,n="Symbol"in t&&"iterator"in Symbol,i="FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),r="FormData"in t,o="ArrayBuffer"in t;if(o)var s=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],a=function(t){return t&&DataView.prototype.isPrototypeOf(t)},u=ArrayBuffer.isView||function(t){return t&&-1<s.indexOf(Object.prototype.toString.call(t))};d.prototype.append=function(t,e){t=h(t),e=p(e);var n=this.map[t];this.map[t]=n?n+","+e:e},d.prototype.delete=function(t){delete this.map[h(t)]},d.prototype.get=function(t){return t=h(t),this.has(t)?this.map[t]:null},d.prototype.has=function(t){return this.map.hasOwnProperty(h(t))},d.prototype.set=function(t,e){this.map[h(t)]=p(e)},d.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},d.prototype.keys=function(){var t=[];return this.forEach(function(e,n){t.push(n)}),f(t)},d.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),f(t)},d.prototype.entries=function(){var t=[];return this.forEach(function(e,n){t.push([n,e])}),f(t)},n&&(d.prototype[Symbol.iterator]=d.prototype.entries);var c=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];w.prototype.clone=function(){return new w(this,{body:this._bodyInit})},b.call(w.prototype),b.call(S.prototype),S.prototype.clone=function(){return new S(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new d(this.headers),url:this.url})},S.error=function(){var t=new S(null,{status:0,statusText:""});return t.type="error",t};var l=[301,302,303,307,308];S.redirect=function(t,e){if(-1===l.indexOf(e))throw new RangeError("Invalid status code");return new S(null,{status:e,headers:{location:t}})},t.Headers=d,t.Request=w,t.Response=S,t.fetch=function(t,e){return new Promise(function(n,r){var o=new w(t,e),s=new XMLHttpRequest;s.onload=function(){var t,e,i={status:s.status,statusText:s.statusText,headers:(t=s.getAllResponseHeaders()||"",e=new d,t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(t){var n=t.split(":"),i=n.shift().trim();if(i){var r=n.join(":").trim();e.append(i,r)}}),e)};i.url="responseURL"in s?s.responseURL:i.headers.get("X-Request-URL");var r="response"in s?s.response:s.responseText;n(new S(r,i))},s.onerror=function(){r(new TypeError("Network request failed"))},s.ontimeout=function(){r(new TypeError("Network request failed"))},s.open(o.method,o.url,!0),"include"===o.credentials?s.withCredentials=!0:"omit"===o.credentials&&(s.withCredentials=!1),"responseType"in s&&i&&(s.responseType="blob"),o.headers.forEach(function(t,e){s.setRequestHeader(e,t)}),s.send(void 0===o._bodyInit?null:o._bodyInit)})},t.fetch.polyfill=!0}function h(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function p(t){return"string"!=typeof t&&(t=String(t)),t}function f(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return n&&(e[Symbol.iterator]=function(){return e}),e}function d(t){this.map={},t instanceof d?t.forEach(function(t,e){this.append(e,t)},this):Array.isArray(t)?t.forEach(function(t){this.append(t[0],t[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function y(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function g(t){return new Promise(function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}})}function m(t){var e=new FileReader,n=g(e);return e.readAsArrayBuffer(t),n}function v(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function b(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t)if("string"==typeof t)this._bodyText=t;else if(i&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(r&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(e&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(o&&i&&a(t))this._bodyArrayBuffer=v(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!o||!ArrayBuffer.prototype.isPrototypeOf(t)&&!u(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=v(t)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):e&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},i&&(this.blob=function(){var t=y(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?y(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(m)}),this.text=function(){var t,e,n,i=y(this);if(i)return i;if(this._bodyBlob)return t=this._bodyBlob,e=new FileReader,n=g(e),e.readAsText(t),n;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),n=new Array(e.length),i=0;i<e.length;i++)n[i]=String.fromCharCode(e[i]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},r&&(this.formData=function(){return this.text().then(T)}),this.json=function(){return this.text().then(JSON.parse)},this}function w(t,e){var n,i,r=(e=e||{}).body;if(t instanceof w){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new d(t.headers)),this.method=t.method,this.mode=t.mode,r||null==t._bodyInit||(r=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new d(e.headers)),this.method=(n=e.method||this.method||"GET",i=n.toUpperCase(),-1<c.indexOf(i)?i:n),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function T(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var n=t.split("="),i=n.shift().replace(/\+/g," "),r=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(i),decodeURIComponent(r))}}),e}function S(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new d(e.headers),this.url=e.url||"",this._initBody(t)}}("undefined"!=typeof self?self:window);var e=function(t){this.serverUrl="https://api.targomo.com/",this.statisticsUrl="https://api.targomo.com/statistics/",this.tilesUrl="https://api.targomo.com/vector-statistics/",this.poiUrl="https://api.targomo.com/pointofinterest/",this.mapTilesUrl="https://maps.targomo.com/",this.photonGeocoderUrl="https://api.targomo.com/geocode/",this.overpassUrl="https://api.targomo.com/overpass/",this.fleetsUrl="https://api.targomo.com/fleetplanner/",this.basemapsUrl="https://maps.targomo.com/styles/",this.version=1,this.debug=!1,Object.assign(this,t)},n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var r=function(){return(r=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};function o(t,e,n,i){return new(n||(n=Promise))(function(r,o){function s(t){try{u(i.next(t))}catch(t){o(t)}}function a(t){try{u(i.throw(t))}catch(t){o(t)}}function u(t){t.done?r(t.value):new n(function(e){e(t.value)}).then(s,a)}u((i=i.apply(t,e||[])).next())})}function s(t,e){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(r=2&o[0]?i.return:o[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,o[1])).done)return r;switch(i=0,r&&(o=[2&o[0],r.value]),o[0]){case 0:case 1:r=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,i=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(r=0<(r=s.trys).length&&r[r.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!r||o[1]>r[0]&&o[1]<r[3])){s.label=o[1];break}if(6===o[0]&&s.label<r[1]){s.label=r[1],r=o;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(o);break}r[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],i=0}finally{n=r=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}var a=function(t,e,n,i){this.value=t,this.key=e,this.previous=n,this.next=i},u=function(){function t(t){void 0===t&&(t=0),this.capacity=t,this.map={},this.size=0}return t.prototype.get=function(t,e){return o(this,void 0,void 0,function(){var n,i,r,o,u;return s(this,function(s){switch(s.label){case 0:if(void 0===(n=this.map[t]))return[3,5];this.oldest==n&&n.next&&(this.oldest=n.next),n.next&&(n.next.previous=n.previous),n.previous&&(n.previous.next=n.next),n.previous=this.newest,n.next=null,this.newest=n,s.label=1;case 1:return s.trys.push([1,3,,4]),[4,n.value];case 2:return[2,s.sent()];case 3:return s.sent(),this.map[t]=void 0,[2,this.get(t,e)];case 4:return[3,8];case 5:return e?(i=e(),r=this.map[t]=new a(i,t,this.newest,null),[4,i]):[3,7];case 6:return o=s.sent(),this.newest&&(this.newest.next=r),this.newest=r,this.capacity&&(this.size>=this.capacity?(u=this.oldest)&&(this.oldest=u.next,delete this.map[u.key]):this.size++),this.oldest||(this.oldest=this.newest),[2,o];case 7:return[2,void 0];case 8:return[2]}})})},t}(),c=function(){function t(){this.map={}}return t.prototype.get=function(t,e){return o(this,void 0,void 0,function(){var n,i;return s(this,function(r){switch(r.label){case 0:return n="string"==typeof t?t:JSON.stringify(t),null==this.map[n]?[3,1]:[2,this.map[n]];case 1:return[4,e()];case 2:return i=r.sent(),[2,this.map[n]=i]}})})},t}(),l=new c;function h(t){t instanceof String||"string"==typeof t?console.log(t):console.log(JSON.stringify(t,null,2))}var p=function(){function t(t){this.options=t}return t.prototype.fetch=function(t,e,n,i){return void 0===e&&(e="GET"),void 0===i&&(i={}),o(this,void 0,void 0,function(){var r,o,a,u,c,l,p,f,d,y,g,m,v;return s(this,function(s){switch(s.label){case 0:return"JSONP"!==(r=e)?i.Accept=i.Accept?i.Accept:"application/json":r="GET","POST-RAW"===e&&(r="POST"),"PUT"!==r&&"POST"!==r||(i["Content-Type"]="application/json"),o=new Headers(i),a={method:r,headers:o},"POST-RAW"===e?a.body=n:"GET"!==e&&"JSONP"!==e&&(a.body=JSON.stringify(n)),[4,fetch(t,a)];case 1:return u=s.sent(),(this.options&&this.options.debug||400<=u.status)&&(console.log("[TargomoClient Begin]"),console.log("[Request]",a.method,t),console.log("  [Headers]"),o.forEach(function(t,e){console.log("    "+e+" = "+t)}),a.body&&(console.log("  [Body]"),console.log(a.body)),console.log("[Response]"),console.log("    status = ",u.status),console.log("    statusText = ",u.statusText),console.log("  [Headers]"),u.headers.forEach(function(t,e){console.log("    "+e+" = "+t)})),400<=u.status?(console.log("  [Body]"),"application/json"!==u.headers.get("content-type")?[3,3]:(f=(p=JSON).stringify,[4,u.text()])):[3,6];case 2:return l=f.apply(p,[s.sent(),null,2]),[3,5];case 3:return[4,u.text()];case 4:l=s.sent(),s.label=5;case 5:throw h(c=l),console.log("[TargomoClient End]"),new Error(c);case 6:return d=null,"JSONP"!==e?[3,8]:[4,u.text()];case 7:return y=s.sent(),g=y.indexOf("("),m=y.lastIndexOf(")"),d=-1<g&&-1<m?JSON.parse(y.substring(g+1,m)):JSON.parse(y),[3,9];case 8:d=u.json(),s.label=9;case 9:return this.options&&this.options.debug?(console.log("  [Body]"),v=h,[4,d]):[3,11];case 10:v.apply(void 0,[s.sent()]),console.log("[TargomoClient End]"),s.label=11;case 11:return[2,d]}})})},t.prototype.fetchData=function(t,e,n,i){return void 0===e&&(e="GET"),o(this,void 0,void 0,function(){var r;return s(this,function(o){switch(o.label){case 0:return[4,this.fetch(t,e,n,i)];case 1:return(r=o.sent()).data?[2,r.data]:(console.warn("No data object was transmitted by "+t+" \nReturning raw response"),[2,r])}})})},t.prototype.fetchCached=function(t,e,n,i,r){var o=this;if(void 0===n&&(n="GET"),!1===t)return this.fetch(e,n,i,r);!0!==t&&t||(t=l);var s=JSON.stringify({url:e,method:n,payload:i});return t.get(s,function(){return o.fetch(e,n,i,r)})},t.prototype.fetchCachedData=function(t,e,n,i,r){var o=this;if(void 0===n&&(n="GET"),!1===t)return this.fetchData(e,n,i,r);!0!==t&&t||(t=l);var s=JSON.stringify({url:e,method:n,payload:i});return t.get(s,function(){return o.fetchData(e,n,i,r)})},t}();function f(t,e){return new p({debug:t&&t.config&&t.config.debug})}var d,y,g=function(){function e(t){this.client=t}return e.prototype.fetch=function(e,n,i){return o(this,void 0,void 0,function(){var r,o,a;return s(this,function(s){switch(s.label){case 0:return r={west:i.southWest.lng,south:i.southWest.lat,east:i.northEast.lng,north:i.northEast.lat},o={bounds:r,benchmarks:n.map(function(t){return{source:t.source,minEnd:t.minEnd,minStart:t.minStart,factor:t.factor}})},a=new t.UrlUtil.TargomoUrl(this.client).host(this.client.config.tilesUrl).part("benchmarks/scores_cumulative/").version().part("/"+encodeURIComponent(""+e)).key().toString(),[4,f(this.client).fetch(a,"POST",o)];case 1:return[2,s.sent()]}})})},e.prototype.metadata=function(e){return o(this,void 0,void 0,function(){var n;return s(this,function(i){switch(i.label){case 0:return n=new t.UrlUtil.TargomoUrl(this.client).host(this.client.config.tilesUrl).part("benchmarks/meta/").version().part("/"+encodeURIComponent(""+e)).key().toString(),[4,f(this.client).fetch(n)];case 1:return[2,i.sent()]}})})},e}();d=t.UrlUtil||(t.UrlUtil={}),y=function(){function t(t){this.client=t,this.url="",this.firstParamPlaced=!1}return t.prototype.host=function(t){return 0===this.url.length&&"/"!==t[t.length-1]&&(t+="/"),this.part(t)},t.prototype.part=function(t){return this.url+=t,this},t.prototype.version=function(){return null!==this.client.config.version&&void 0!==this.client.config.version?this.part("v"+this.client.config.version):"/"===this.url[this.url.length-1]&&(this.url=this.url.substr(0,this.url.length-1)),this},t.prototype.params=function(t){var e=this;return Object.keys(t).forEach(function(n){t[n]instanceof Array?t[n].forEach(function(t){e.param(n,t)}):e.param(n,t[n])}),this},t.prototype.param=function(t,e){this.firstParamPlaced?this.url+="&"+t+"="+e:(this.firstParamPlaced=!0,this.url+="?"+t+"="+e)},t.prototype.key=function(){return this.params({key:this.client.serviceKey})},t.prototype.toString=function(){return this.url},t}(),d.TargomoUrl=y;var m=function(){function e(){}return e.prototype.geocode=function(e,n,i,r,a){return o(this,void 0,void 0,function(){var i,o;return s(this,function(s){switch(s.label){case 0:return i={singleLine:e,f:"json",countryCode:r,maxLocations:5},n&&(i.location=n.lng+","+n.lat),a&&(i.magicKey=a),o=(new t.UrlUtil.TargomoUrl).part("https://geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer/findAddressCandidates").params(i).toString(),[4,f().fetch(o)];case 1:return[2,s.sent().candidates.map(function(t){return{lat:t.location.y,lng:t.location.x,description:t.address}})]}})})},e.prototype.suggest=function(e,n,i,r,a){return void 0===a&&(a=5),o(this,void 0,void 0,function(){var i,o;return s(this,function(s){switch(s.label){case 0:return i={text:e,f:"json",countryCode:r,maxSuggestions:a},n&&(i.location=n.lng+","+n.lat),o=(new t.UrlUtil.TargomoUrl).part("https://geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer/suggest").params(i).toString(),[4,f().fetch(o)];case 1:return[2,s.sent().suggestions]}})})},e.prototype.reverseGeocode=function(e,n){return o(this,void 0,void 0,function(){var n,i,r;return s(this,function(o){switch(o.label){case 0:return(n={f:"json"}).location=e.lng+","+e.lat,i=(new t.UrlUtil.TargomoUrl).part("https://geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer/reverseGeocode").params(n).toString(),[4,f().fetch(i)];case 1:return(r=o.sent())&&r.address?[2,{address:r.address.Match_addr,city:r.address.City,countryCode:r.address.CountryCode,location:r.address.Loc_name,region:r.address.Region,subregion:r.address.Subregion,zip:r.address.Postal}]:[2,{}]}})})},e}(),v=function(){function e(t){this.client=t}return e.prototype.geocode=function(e,n,i){return o(this,void 0,void 0,function(){var r,o,a=this;return s(this,function(s){switch(s.label){case 0:return r=(new t.UrlUtil.TargomoUrl).host(this.client.config.photonGeocoderUrl).part("api").params({q:encodeURIComponent(e),limit:5}).toString(),n&&(r+="&lat="+n.lat+"&lon="+n.lng),i&&(r+="&lang="+encodeURIComponent(i)),[4,f().fetch(r)];case 1:return(o=s.sent()).features.forEach(function(t,e,n){"boundary"==t.properties.osm_key&&n.splice(e,1)}),[2,o.features.map(function(t){return t.value=t.properties.osm_id,t.description=a.buildPlaceDescription(t.properties),t})]}})})},e.prototype.buildPlaceDescription=function(t){var e=function(t,e){return void 0===e&&(e=" "),t.filter(function(t){return!!t}).join(e).trim()},n=function(n,i){return e(n.map(function(e){return t[e]}),i)},i=n(["street","housenumber"]," "),r=e([n(["postcode","city"]," "),t.country],", "),o={title:"",meta1:"",meta2:"",full:""};return void 0!==t.name?(o.title=t.name,o.meta1=i,o.meta2=r):(o.title=i,o.meta1=r),t.name!==i&&(o.full=o.title),o.meta1&&t.name!==i&&(o.full+=", "+o.meta1),o.meta1&&t.name===i&&(o.full+=o.meta1),o.full=e([o.full,o.meta2],", "),o},e}(),b=function(){this.edgeWeight="time"},w=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.transitFrameDuration=void 0,e.transitFrameDate=20170801,e.transitFrameTime=39600,e.transitMaxTransfers=-1,e.transitAvoidTransitRouteTypes=[],e.walkSpeed={},e.bikeSpeed={},e}return i(e,t),e}(b),T=function(t){function e(e){var n=t.call(this)||this;if(Object.assign(n,e),null!=e.transitFrameDateTime){var i=void 0,r=(i=e.transitFrameDateTime instanceof Date?e.transitFrameDateTime:new Date(e.transitFrameDateTime))?1e4*i.getFullYear()+100*(i.getMonth()+1)+i.getDate():void 0,o=i?3600*i.getHours()+60*i.getMinutes():void 0;n.transitFrameDate=r||n.transitFrameDate,n.transitFrameTime=o||n.transitFrameTime}return n}return i(e,t),e.prototype.buildTargetsCfg=function(t){return t.map(function(t){return{lat:t.lat,lng:t.lng,id:t.id}})},e.prototype.buildSourcesCfg=function(t){var e=this;return t.map(function(t){var n={lat:t.lat,lng:t.lng,id:t.id,tm:t.tm};if(!n.tm)switch(e.travelType){case"car":n.tm={car:e.rushHour?{rushHour:e.rushHour}:{}};break;case"walk":n.tm={walk:e.walkSpeed};break;case"bike":n.tm={bike:e.bikeSpeed};break;case"transit":n.tm={transit:{frame:{date:e.transitFrameDate,time:e.transitFrameTime,duration:e.transitFrameDuration},maxTransfers:e.transitMaxTransfers}}}return n})},e}(w),S=function(t){function e(e,n,i){var r=t.call(this,n)||this;return r.sources=r.buildSourcesCfg(e),i&&(r.targets=r.buildTargetsCfg(i)),r.multigraph=n.multigraph,r}return i(e,t),e}(T),E=function(){function e(t){this.client=t}return e.prototype.fetch=function(e,n,i){return o(this,void 0,void 0,function(){var r,o;return s(this,function(s){switch(s.label){case 0:return r=new t.UrlUtil.TargomoUrl(this.client).part(this.client.serviceUrl).version().part("/multigraph").key().toString(),o=new S(e,n,i),[4,f(this.client).fetch(r,"POST",o)];case 1:return[2,s.sent()]}})})},e.prototype.fetchOverview=function(e,n,i){return o(this,void 0,void 0,function(){var r,o;return s(this,function(s){switch(s.label){case 0:return r=new t.UrlUtil.TargomoUrl(this.client).part(this.client.serviceUrl).version().part("/multigraph/overview").key().toString(),o=new S(e,n,i),[4,f(this.client).fetch(r,"POST",o)];case 1:return[2,s.sent()]}})})},e.prototype.getTiledMultigraphUrl=function(e,n,i,r){return o(this,void 0,void 0,function(){var o,a,u;return s(this,function(s){switch(s.label){case 0:return o=new t.UrlUtil.TargomoUrl(this.client).part(this.client.serviceUrl).version().part("/objectcache/add").key().toString(),a=new S(e,n,r),[4,f(this.client).fetch(o,"POST",a)];case 1:return u=s.sent(),[2,new t.UrlUtil.TargomoUrl(this.client).part(this.client.serviceUrl).version().part("/multigraph/{z}/{x}/{y}."+i).key().params({cfgUuid:u.uuid}).toString()]}})})},e}(),x=function(t,e,n,i){this.description=i.description||"",this.serviceUrl=t,this.serviceKey=e,this.email=i.email||"developers@targomo.com",this.sendMail=!1,this.callbackUrl=i.callbackUrl||"https://localhost/",this.pointsPerSolution=i.pointsPerSolution,this.maxSolutions=i.maxSolutions||1,this.travelType=i.travelType,this.edgeWeight=i.edgeWeight,this.maxEdgeWeight=i.maxEdgeWeight,this.statisticGroupId=i.statisticGroup,i.statistic instanceof Number||"number"==typeof i.statistic?this.statisticId=+i.statistic:this.statisticId=i.statistic.id;var r={};n.forEach(function(t){r[t.id]={id:t.id,x:t.lng,y:t.lat}}),this.sources.push(r)},U=function(t){this.raw=t,this.id=t.id,this.maxPossibleValue=t.maxPossibleValue,this.solutions=t.simulationResults.map(function(t){var e={};return t.sourcePoints.forEach(function(t){e[t.id]=t.optimal}),{id:t.id,startTime:t.startTime,endTime:t.endTime,maxValue:t.maxValue,numberOfDesiredPoints:t.numberOfDesiredPoints,sources:e}})},O=function(){function e(t){this.client=t}return e.prototype.create=function(e,n){return o(this,void 0,void 0,function(){var i,r,o;return s(this,function(s){switch(s.label){case 0:return e.length?(i=new t.UrlUtil.TargomoUrl(this.client).host(this.client.config.statisticsUrl).part("simulation/start/").key().params({serviceUrl:encodeURIComponent(this.client.serviceUrl)}).toString(),r=new x(this.client.serviceUrl,this.client.serviceKey,e,n),[4,f(this.client).fetch(i,"POST",r)]):[2,null];case 1:return[2,(o=s.sent())&&+o.id]}})})},e.prototype.ready=function(e){return o(this,void 0,void 0,function(){var n;return s(this,function(i){return e instanceof Array||(e=[e]),n=new t.UrlUtil.TargomoUrl(this.client).host(this.client.config.statisticsUrl).part("simulation/ready/").key().params({serviceUrl:encodeURIComponent(this.client.serviceUrl),simulationId:e}).toString(),[2,f(this.client).fetch(n)]})})},e.prototype.fetch=function(e){return o(this,void 0,void 0,function(){var n,i;return s(this,function(r){switch(r.label){case 0:return n=new t.UrlUtil.TargomoUrl(this.client).host(this.client.config.statisticsUrl).part("simulation/"+e+"/").key().params({serviceUrl:encodeURIComponent(this.client.serviceUrl)}).toString(),i=U.bind,[4,f(this.client).fetch(n)];case 1:return[2,new(i.apply(U,[void 0,r.sent()]))]}})})},e}(),W=function(t){function e(e,n,i){var r=t.call(this,i)||this;return r.osmTypes=[],r.sources=r.buildSourcesCfg([n]),r.osmTypes=i.osmTypes,r.format=i.format,r.serviceKey=e.serviceKey,r.serviceUrl=e.serviceUrl,r}return i(e,t),e}(T),P=function(){function t(t,e,n,i){this.id=t,this.lng=e,this.lat=n,this.properties=i,this.properties&&(this.properties["marker-size"]=1)}return t.prototype.toString=function(){return this.properties?this.properties.name:""},t.prototype.copy=function(){var e=new t(this.id,this.lat,this.lng,r({},this.properties));for(var n in this)"properties"!=n&&(e[n]=this[n]);return e},t}();function C(t){var e=t.lat,n=t.lon;return void 0===e&&t.center&&(e=t.center.lat,n=t.center.lon),new P(t.id,n,e,t.tags)}var M,A=function(){function t(t){this.client=t}return t.prototype.queryRaw=function(t){return o(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return[4,f(this.client).fetch(this.client.config.overpassUrl+"/api/interpreter","POST-RAW",t)];case 1:return[2,e.sent().elements.filter(function(t){return!!t.tags}).map(function(t){return C(t)})]}})})},t.prototype.query=function(t,e){function n(t){if("*"===t.tag||null==t.tag)return'"'+t.type+'"';if(t.type&&t.tag)return'"'+t.type+'"="'+t.tag+'"';throw new Error("invalid query"+JSON.stringify(t))}var i=[];t.forEach(function(t){e.forEach(function(e){i.push("\n      way["+n(t)+"]\n        ("+e.southWest.lat+","+e.southWest.lng+","+e.northEast.lat+","+e.northEast.lng+");\n      node["+n(t)+"]\n        ("+e.southWest.lat+","+e.southWest.lng+","+e.northEast.lat+","+e.northEast.lng+");\n        ")})});var r="\n      [out:json];\n      (\n      "+i.join("")+"\n      );\n      out center;\n    ";return this.queryRaw(r)},t.prototype.queryGetCustom=function(t){return o(this,void 0,void 0,function(){return s(this,function(e){switch(e.label){case 0:return[4,f(this.client).fetch(t)];case 1:return[2,e.sent().elements.map(function(t){return C(t)})]}})})},t.prototype.reachable=function(t,e){return o(this,void 0,void 0,function(){var n;return s(this,function(i){switch(i.label){case 0:return n=this.client.config.poiUrl+"/reachability",[4,f(this.client).fetch(n,"POST",new W(this.client,t,e))];case 1:return[2,i.sent()]}})})},t}();(M=t.StatisticsGroups||(t.StatisticsGroups={}))[M.GERMANY_ZENSUS_100M_STATISTICS=9]="GERMANY_ZENSUS_100M_STATISTICS",M[M.GERMANY_ZENSUS_200M_STATISTICS=2]="GERMANY_ZENSUS_200M_STATISTICS",M[M.GERMANY_ZENSUS_500M_STATISTICS=11]="GERMANY_ZENSUS_500M_STATISTICS",M[M.GERMANY_ZENSUS_1000M_STATISTICS=3]="GERMANY_ZENSUS_1000M_STATISTICS",M[M.GERMANY_ZENSUS_2000M_STATISTICS=10]="GERMANY_ZENSUS_2000M_STATISTICS",M[M.NORWAY_STATISTICS=4]="NORWAY_STATISTICS",M[M.CENSUS_BRANDENBURG_POPULATION=12]="CENSUS_BRANDENBURG_POPULATION",M[M.CANADA_BLOCK_STATISTICS=8]="CANADA_BLOCK_STATISTICS",M[M.CANADA_AREA_STATISTICS=5]="CANADA_AREA_STATISTICS",M[M.BERLIN_STATISTICS=6]="BERLIN_STATISTICS";var _,R,I,k=function(t){for(var e in this.values=t,this.total=0,this.values)this.total+=this.values[e]};(_=t.SRID||(t.SRID={}))[_.SRID_3857=3857]="SRID_3857",_[_.SRID_4326=4326]="SRID_4326",(R=t.MultigraphRequestAggregation||(t.MultigraphRequestAggregation={})).NONE="none",R.SUM="sum",R.MAX="max",R.MIN="min",R.MEAN="mean",R.MEDIAN="median",R.NEAREST="nearest",R.UNION="routing_union",(I=t.MultigraphRequestLayer||(t.MultigraphRequestLayer={})).EDGE="edge",I.NODE="node",I.TILE="tile",I.HEXAGON="hexagon",I.TILE_NODE="tile_node",I.HEXAGON_NODE="hexagon_node";var N=new(function(){function t(){this.R=6378137}return t.prototype.project=function(t){var e=Math.PI/180,n=Math.max(Math.min(Math.sin(t.lat*e),1-1e-15),-(1-1e-15));return{x:this.R*t.lng*e,y:this.R*Math.log((1+n)/(1-n))/2}},t.prototype.unproject=function(t){var e=180/Math.PI;return{lat:(2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,lng:t.x*e/this.R}},t}()),L=6371.01,D=Math.PI/180;function G(t,e){var n=D*t.lat,i=D*t.lng,r=D*e.lat,o=D*e.lng;return Math.acos(Math.sin(n)*Math.sin(r)+Math.cos(n)*Math.cos(r)*Math.cos(i-o))*L}function B(t,e){e*=1e3;var n=t.lat,i=t.lng,r=n*D,o=e/1e3/110.574235,s=e/1e3/(110.572833*Math.cos(r));return{northEast:{lat:n+o,lng:i+s},southWest:{lat:n-o,lng:i-s}}}function j(t){switch(t.travelType){case"walk":return 10;case"bike":return 25;case"transit":return 150;default:return 120}}function F(t){return t.reduce(function(t,e){return t.northEast.lat=e.lat>t.northEast.lat?e.lat:t.northEast.lat,t.northEast.lng=e.lng>t.northEast.lng?e.lng:t.northEast.lng,t.southWest.lat=e.lat<t.southWest.lat?e.lat:t.southWest.lat,t.southWest.lng=e.lng<t.southWest.lng?e.lng:t.southWest.lng,t},{northEast:{lat:t[0].lat,lng:t[0].lng},southWest:{lat:t[0].lat,lng:t[0].lng}})}function z(t,e,n){return e instanceof Array?H(t,e,n).filter(function(t){return!e.some(function(e){return e==t})}):H(t,e,n).filter(function(t){return e!=t})}function H(t,e,n){return e instanceof Array?t.filter(function(t){return e.some(function(e){return G(t,e)<=n})}):t.filter(function(t){return G(t,e)<=n})}function q(t,e){var n=N.unproject(t);return null!=e?{lat:n.lat,lng:n.lng,elevation:e}:n}var V,K=Object.freeze({contains:function(t,e){return e.lat>=t.southWest.lat&&e.lat<=t.northEast.lat&&e.lng>=t.southWest.lng&&e.lng<=t.northEast.lng},calculateDistance:G,boundingBox:B,locationsWithinTravelOptions:function(t,e,n){var i,r=n.maxEdgeWeight;switch(n.travelType){case"walk":i=10;break;case"bike":i=25;break;case"transit":i=150;break;default:i=120}return z(t,e,"distance"===n.edgeWeight?Math.round(r/1e3):i*r/3600)},boundingBoxWithinTravelOptions:function(t,e){var n=e.maxEdgeWeight,i=j(e);return B(t,"distance"===e.edgeWeight?Math.round(n/1e3):i*n/3600)},boundingBoxFromLocationArray:F,boundingBoxListWithinTravelOptions:function(t,e){var n=e.maxEdgeWeight,i=j(e),r="distance"===e.edgeWeight?Math.round(n/1e3):i*n/3600,o={northEast:{lat:-1/0,lng:-1/0},southWest:{lat:1/0,lng:1/0}};return t.forEach(function(t){var e=B(t,r);o.northEast.lat=Math.max(o.northEast.lat,e.northEast.lat),o.northEast.lng=Math.max(o.northEast.lng,e.northEast.lng),o.southWest.lat=Math.min(o.southWest.lat,e.southWest.lat),o.southWest.lng=Math.min(o.southWest.lng,e.southWest.lng)}),o},locationsWithinDistance:z,locationsWithinDistanceInclusive:H,webMercatorToLatLng:q,latLngToWebMercator:function(t){return N.project(t)}}),Z=function(t,e){var n=this;this.points=[],this.type=e.type,this.travelTime=e.travelTime,this.distance=e.length/1e3,this.warning=e.warning,this.elevationGain=e.elevationGain,this.transitSegment=!1,this.startName=e.startname,this.endName=e.endname,e.points.forEach(function(t){n.points.push(q({x:t[1],y:t[0]},t[2]))}),e.isTransit&&(this.transitSegment=!0,this.routeType=e.routeType,this.routeShortName=e.routeShortName,this.startName=e.startname,this.endName=e.endname,this.departureTime=e.departureTime,this.arrivalTime=e.arrivalTime,this.tripHeadSign=e.tripHeadSign)},J=function(){function t(t,e,n,i){var r=this;this.travelTime=e,this.routeSegments=[],this.targetHeight=void 0,this.sourceHeight=void 0,this.sourceId=void 0,this.targetId=void 0,this.length=void 0;var o=0,s=[];n.reverse().forEach(function(e){var n=new Z(t,e);r.routeSegments.push(n),"TRANSFER"===n.type&&o++,s=s.concat(n.points.reverse())}),this.points=s,this.transfers=o,void 0!==i&&(this.sourceId=i.source_id,this.targetId=i.target_id,this.length=i.length);var a=this.calculateElevationDifferences(this.points);this.targetHeight=a.targetHeight,this.sourceHeight=a.sourceHeight,this.uphillMeter=a.uphillMeter,this.downhillMeter=a.downhillMeter,this.totalElevationDifference=Math.abs(this.sourceHeight-this.targetHeight),this.departureTime=this.calculateDepartureTime(),this.arrivalTime=this.calculateArrivalTime(),this.distance=this.calculateDistance(),this.elevationGain=this.calculateElevationGain()}return t.prototype.calculateDistance=function(){for(var t=0,e=0;e<this.routeSegments.length;e++)t+=this.routeSegments[e].distance;return t},t.prototype.calculateElevationGain=function(){for(var t=void 0,e=0;e<this.routeSegments.length;e++)isFinite(this.routeSegments[e].elevationGain)&&(t=(t||0)+this.routeSegments[e].elevationGain);return t},t.prototype.calculateElevationDifferences=function(t){for(var e=void 0,n=void 0,i=void 0,r=0,o=0,s=this.points.length-1;0<=s;s--)0==s&&(n=this.points[s].elevation),s==this.points.length-1&&(i=this.points[s].elevation),void 0!==e&&(e>this.points[s].elevation?r+=e-this.points[s].elevation:e<this.points[s].elevation&&(o+=this.points[s].elevation-e)),e=this.points[s].elevation;return{targetHeight:n,sourceHeight:i,uphillMeter:r,downhillMeter:o}},t.prototype.calculateDepartureTime=function(){for(var t=0,e=0;e<this.routeSegments.length;e++){var n=this.routeSegments[e];if(null!=n.departureTime)return n.departureTime-t;t+=n.travelTime||0}},t.prototype.calculateArrivalTime=function(){for(var t=0,e=this.routeSegments.length-1;0<=e;e--){var n=this.routeSegments[e];if(null!=n.arrivalTime)return n.arrivalTime-t;t+=n.travelTime||0}},t}(),Y=function(t,e){function n(t){for(var n={},i=0,r=e;i<r.length;i++){var o=r[i];n[o.name]=new k(t[o.id])}return n}var i={};if(t.individualStatistics)for(var r in t.individualStatistics)t.individualStatistics[r]&&t.individualStatistics[r].statistics&&(i[r]=n(t.individualStatistics[r].statistics));this.statistics=n(t.statistics),this.individualStatistics=i,this.raw=t};(V=t.MultigraphStatus||(t.MultigraphStatus={})).CREATED="CREATED",V.ROUTING="ROUTING",V.MERGING="MERGING",V.AGGREGATING="AGGREGATING",V.COMPLETED="COMPLETED",V.FAILED="FAILED";var X=function(t,e){this.values={};var n={};e.forEach(function(t){n[t.id]=t.name}),this.raw=t;var i=this.values;for(var r in t){var o=t[r],s=(o.aggregation||"").toLowerCase();i[s]=i[s]||{};var a=n[o.statisticId];i[s][a]={value:o.value}}},$=function(){this.minPolygonHoleSize=1e7,this.buffer=50,this.simplify=50,this.srid=t.SRID.SRID_4326,this.quadrantSegments=2,this.intersectionMode="union",this.decimalPrecision=6},Q=function(t){function e(e,n,i){var r=t.call(this,i)||this;return r.polygon=new $,r.sources=r.buildSourcesCfg(n),r.polygon.values=i.travelEdgeWeights,r.polygon.serializer=i.serializer,r.polygon.simplify=i.simplify,r.polygon.srid=i.srid,r.polygon.buffer=i.buffer,r.polygon.minPolygonHoleSize=i.minPolygonHoleSize,r.polygon.quadrantSegments=i.quadrantSegments,r.polygon.intersectionMode=i.intersectionMode,r.polygon.decimalPrecision=i.decimalPrecision,r}return i(e,t),e}(T),tt=function(){function t(t){this.southWest=new et(1/0,1/0),this.northEast=new et(-1/0,-1/0),t&&(this.southWest=new et(t.southWest.x,t.southWest.y),this.northEast=new et(t.northEast.x,t.northEast.y))}return t.prototype.expandPoint=function(t,e){this.southWest.x=Math.min(this.southWest.x,t),this.northEast.x=Math.max(this.northEast.x,t),this.southWest.y=Math.min(this.southWest.y,e),this.northEast.y=Math.max(this.northEast.y,e)},t.prototype.expand=function(t){this.expandPoint(t.northEast.x,t.northEast.y),this.expandPoint(t.southWest.x,t.southWest.y)},t}(),et=function(t,e){this.x=t,this.y=e},nt=function(t){var e=this;this.bounds3857=new tt,this.points=t.map(function(t){e.bounds3857.expandPoint(t[0],t[1]);var n=N.project({lat:t[0],lng:t[1]});return new et(n.x,n.y)})},it=function(t){var e=this;this.bounds3857=new tt,this.travelTime=t.travelTime,this.area=t.area,this.lineStrings=[new nt(t.outerBoundary)],this.bounds3857.expand(this.lineStrings[0].bounds3857),t.innerBoundary&&t.innerBoundary.forEach(function(t){var n=new nt(t);e.lineStrings.push(n),e.bounds3857.expand(n.bounds3857)})},rt=function(){function e(t){this.client=t}return e.prototype.fetch=function(t,e){return o(this,void 0,void 0,function(){var n,i;return s(this,function(r){switch(r.label){case 0:return n=new Q(this.client,t,e),[4,this._executeFetch(t,e,n)];case 1:return i=r.sent(),"json"===e.serializer?[2,ot.create(i,i.metadata)]:"geojson"===e.serializer?[2,i]:[2]}})})},e.prototype._executeFetch=function(e,n,i){return o(this,void 0,void 0,function(){var e,r;return s(this,function(o){switch(o.label){case 0:return e=new t.UrlUtil.TargomoUrl(this.client).part(this.client.serviceUrl).version().part("/polygon").key().toString(),[4,f(this.client).fetchCachedData(n.useClientCache,e,"POST",i)];case 1:return(r=o.sent()).metadata=n,[2,r]}})})},e}(),ot=function(t){function e(e){return t.apply(this,e)||this}return i(e,t),e.create=function(t,n){var i=Object.create(e.prototype);return t.forEach(function(t){return i.push(t)}),n&&(i.metadata=n),i},e.prototype.getMaxBounds=function(){var t=[];return this.forEach(function(e){var n;e.polygons.forEach(function(t){var e=new it(t);n?n.expand(e.bounds3857):n=e.bounds3857}),t.push(q(n.northEast,null)),t.push(q(n.southWest,null))}),F(t)},e}(Array),st=function(t){function e(e,n,i,r){var o=t.call(this,r)||this;return o.sources=o.buildSourcesCfg(n),o.targets=o.buildTargetsCfg(i),o}return i(e,t),e}(T),at=function(){function e(t){this.client=t}return e.prototype.individual=function(e,n,i){return o(this,void 0,void 0,function(){var r,o;return s(this,function(s){switch(s.label){case 0:return r=new t.UrlUtil.TargomoUrl(this.client).part(this.client.serviceUrl).version().part("/time").key().toString(),o=new st(this.client,e,n,i),[4,f(this.client).fetchCachedData(i.useClientCache,r,"POST",o)];case 1:return[2,s.sent()]}})})},e.prototype.combined=function(e,n,i){return o(this,void 0,void 0,function(){var r,o;return s(this,function(s){switch(s.label){case 0:return r=new t.UrlUtil.TargomoUrl(this.client).part(this.client.serviceUrl).version().part("/reachability").key().toString(),o=new st(this.client,e,n,i),[4,f(this.client).fetchCachedData(i.useClientCache,r,"POST",o)];case 1:return[2,s.sent()]}})})},e.prototype.count=function(t,e,n){return o(this,void 0,void 0,function(){return s(this,function(i){switch(i.label){case 0:return[4,this.locations(t,e,n)];case 1:return[2,i.sent().length]}})})},e.prototype.locations=function(t,e,n){return o(this,void 0,void 0,function(){var i;return s(this,function(r){switch(r.label){case 0:return i={},e.forEach(function(t){return i[String(t.id)]=-1}),[4,this.combined(t,e,n)];case 1:return r.sent().forEach(function(t){var e=String(t.id);i[e]?-1<t.travelTime&&(-1<i[e]?i[e]=Math.min(i[e],t.travelTime):i[e]=t.travelTime):console.warn("NOT FOUND",String(t.id))}),[2,e.filter(function(t){var e=String(t.id);return t.travelTime=i[e],-1<i[e]})]}})})},e}(),ut=function(t){function e(e,n,i,r){var o=t.call(this,r)||this;return o.sources=o.buildSourcesCfg(n),o.targets=o.buildTargetsCfg(i),o.pathSerializer=r.pathSerializer,"boolean"==typeof r.recommendations&&(r.recommendations=r.recommendations?1:0),Number.isInteger(r.recommendations)&&o.sources&&o.sources.forEach(function(t){if(null!=t.tm)for(var e in t.tm)t.tm[e].recommendations=r.recommendations}),o}return i(e,t),e}(T),ct=function(){function e(t){this.client=t}return e.prototype.fetch=function(t,e,n){return o(this,void 0,void 0,function(){var i,r,o=this;return s(this,function(s){switch(s.label){case 0:return i=new ut(this.client,t,e,n),[4,this._executeFetch(t,e,n,i)];case 1:return r=s.sent(),n.pathSerializer&&"compact"!==n.pathSerializer?"geojson"===n.pathSerializer?[2,r.routes]:[2]:[2,r.routes.map(function(t){return new J(o.client,t.travelTime,t.segments,t)})]}})})},e.prototype._executeFetch=function(e,n,i,r){return o(this,void 0,void 0,function(){var e;return s(this,function(n){switch(n.label){case 0:return e=new t.UrlUtil.TargomoUrl(this.client).part(this.client.serviceUrl).version().part("/route").key().toString(),[4,f(this.client).fetchCachedData(i.useClientCache,e,"POST",r,{Accept:"application/json,application/javascript,*/*"})];case 1:return[2,n.sent()]}})})},e}(),lt=function(){function e(t){this.client=t}return e.prototype.metadata=function(e){return o(this,void 0,void 0,function(){var n;return s(this,function(i){switch(i.label){case 0:return n=new t.UrlUtil.TargomoUrl(this.client).host(this.client.config.tilesUrl).part("similarity/meta/").version().part("/"+encodeURIComponent(""+e)).key().toString(),[4,f(this.client).fetch(n)];case 1:return[2,i.sent()]}})})},e.prototype.fetch=function(e,n,i,r,a){return o(this,void 0,void 0,function(){var o,u,c,l;return s(this,function(s){switch(s.label){case 0:return o={west:r.southWest.lng,south:r.southWest.lat,east:r.northEast.lng,north:r.northEast.lat},u={bounds:o,refCellId:n,scores:i.map(function(t){return{source:t.source,minutes:t.minutes,factor:t.factor||1}})},c=new t.UrlUtil.TargomoUrl(this.client).host(this.client.config.tilesUrl).part("similarity/scores_cumulative/").version().part("/"+encodeURIComponent(""+e)).key(),l=a?c.params({normalizeOnViewport:!!a}).toString():c.toString(),[4,f(this.client).fetch(l,"POST",u)];case 1:return[2,s.sent()]}})})},e}(),ht=function(t,e,n){this.inactiveSources=[],this.getClosestSources=!1,this.serviceUrl=t.serviceUrl,this.serviceKey=t.serviceKey,this.useCache=null==n.useCache||n.useCache,this.sources=e.map(function(t){return{id:t.id,y:t.lat,x:t.lng}}),this.iFeelLucky=n.iFeelLucky,this.travelType=n.travelType,this.edgeWeight=n.edgeWeight,this.maxEdgeWeight=n.maxEdgeWeight,this.frame=n.transitFrameDuration,this.time=n.transitFrameTime,this.date=n.transitFrameDate,this.maxTransfers=n.transitMaxTransfers,this.maxWalkingTimeFromSource=n.transitMaxWalkingTimeFromSource,this.avoidTransitRouteTypes=n.transitAvoidTransitRouteTypes,this.rushHour=n.rushHour,n.inactiveSources&&(this.inactiveSources=n.inactiveSources.map(function(t){return{id:t.id,y:t.lat,x:t.lng}}));var i=[];n.statistics&&(this.omitIndividualStatistics=n.omitIndividualStatistics,i=n.statistics.map(function(t){return t instanceof Number||"number"==typeof t?+t:t.id})),this.statisticGroupId=+n.statisticsGroup,this.statisticIds=i,n.closestSources&&(this.getClosestSources=!0)},pt=function(t,e,n){var i=n.statistics.map(function(t){return t instanceof Number||"number"==typeof t?+t:t.id});this.statisticGroupId=+n.statisticsGroup,this.statisticIds=i,this.intersectionGeometry={data:e,crs:n.crs||4326}},ft=function(){function e(t){this.client=t,this.statisticsMetadataCache=new u(200),this.statisticsEnsemblesCache=new u(200)}return e.prototype.combined=function(t,e){return o(this,void 0,void 0,function(){var n;return s(this,function(i){switch(i.label){case 0:return[4,this.dependent(t,e)];case 1:return[2,(n=i.sent())&&n.statistics]}})})},e.prototype.individual=function(t,e){return o(this,void 0,void 0,function(){var n;return s(this,function(i){switch(i.label){case 0:return[4,this.dependent(t,e)];case 1:return[2,(n=i.sent())&&n.individualStatistics]}})})},e.prototype.travelTimes=function(e,n){return o(this,void 0,void 0,function(){var i;return s(this,function(r){switch(r.label){case 0:return e.length?(i=new t.UrlUtil.TargomoUrl(this.client).host(this.client.config.statisticsUrl).part("traveltimes").params({serviceUrl:this.client.serviceUrl}).toString(),[4,f(this.client).fetch(i,"POST",new ht(this.client,e,n))]):[2,null];case 1:return[2,r.sent()]}})})},e.prototype.dependent=function(e,n){return o(this,void 0,void 0,function(){var i,r;return s(this,function(o){switch(o.label){case 0:return e.length?(i=new t.UrlUtil.TargomoUrl(this.client).host(this.client.config.statisticsUrl).part("charts/dependent").params({serviceUrl:this.client.serviceUrl}).toString(),[4,f(this.client).fetch(i,"POST",new ht(this.client,e,n))]):[2,null];case 1:return r=o.sent(),[2,new Y(r,n.statistics)]}})})},e.prototype.geometry=function(e,n){return o(this,void 0,void 0,function(){var i,r;return s(this,function(o){switch(o.label){case 0:return e?(i=new t.UrlUtil.TargomoUrl(this.client).host(this.client.config.statisticsUrl).part("values/geometry").params({serviceUrl:this.client.serviceUrl}).toString(),[4,f(this.client).fetch(i,"POST",new pt(this.client,e,n))]):[2,null];case 1:return r=o.sent(),[2,new X(r,n.statistics)]}})})},e.prototype.metadata=function(e){return o(this,void 0,void 0,function(){var n,i,r,a=this;return s(this,function(u){switch(u.label){case 0:return n=this.client.config.tilesUrl,i="number"==typeof e?e:e.id,r=n+"-"+i,[4,this.statisticsMetadataCache.get(r,function(){return o(a,void 0,void 0,function(){var e,n;return s(this,function(r){switch(r.label){case 0:return e=new t.UrlUtil.TargomoUrl(this.client).host(this.client.config.tilesUrl).part("statistics/meta/").version().part("/"+i).key().toString(),[4,f(this.client).fetch(e)];case 1:return!(n=r.sent()).name&&n.names&&n.names.en&&(n.name=n.names.en),n.stats&&n.stats.length&&n.stats.forEach(function(t){!t.name&&t.names&&t.names.en&&(t.name=t.names.en)}),[2,n]}})})})];case 1:return[2,u.sent()]}})})},e.prototype.metadataKey=function(t,e){return o(this,void 0,void 0,function(){var n,i,r,o;return s(this,function(s){switch(s.label){case 0:return[4,this.metadata(t)];case 1:for(n=s.sent(),i=0,r=n.stats;i<r.length;i++)if(o=r[i],e.id==o.statistic_id||o.names&&o.names.en==e.name)return[2,o];return[2,null]}})})},e.prototype.tileRoute=function(e,n){var i="number"==typeof e?e:e.id,r=new t.UrlUtil.TargomoUrl(this.client).host(this.client.config.tilesUrl).part("statistics/tiles/").version().part("/"+i+"/{z}/{x}/{y}.mvt").key();return n&&0<n.length?r.params({columns:encodeURIComponent(n.map(function(t){return+t.id}).join(","))}).toString():r.toString()},e.prototype.ensembles=function(){return o(this,void 0,void 0,function(){var e,n=this;return s(this,function(i){switch(i.label){case 0:return e=this.client.config.tilesUrl,[4,this.statisticsEnsemblesCache.get(e,function(){return o(n,void 0,void 0,function(){var e,n,i,r;return s(this,function(o){switch(o.label){case 0:return e=new t.UrlUtil.TargomoUrl(this.client).host(this.client.config.tilesUrl).part("ensemble/list/").version().key().toString(),[4,f(this.client).fetch(e,"GET")];case 1:for(i in n=o.sent())n[i]&&((r=n[i]).id=+r.id,r.groups&&r.groups.length&&r.groups.forEach(function(t){t.hierarchy=+t.hierarchy,t.id=+t.id}));return[2,n]}})})})];case 1:return[2,i.sent()]}})})},e}(),dt=function(t){function e(e,n,i){var r=t.call(this,e,n,i)||this;return delete r.inactiveSources,delete r.statisticGroupId,delete r.statisticIds,delete r.getClosestSources,delete r.useCache,i&&(r.multiGraphSerializationType=i.multigraph.serialization.format,r.multiGraphSerializationDecimalPrecision=i.multigraph.serialization.decimalPrecision,i.multigraph.aggregation&&(r.multiGraphAggregationType=i.multigraph.aggregation.type||null,r.multiGraphAggregationIgnoreOutlier=i.multigraph.aggregation.ignoreOutliers||null,r.multiGraphAggregationMinSourcesRatio=i.multigraph.aggregation.minSourcesRatio||null,r.multiGraphAggregationMinSourcesCount=i.multigraph.aggregation.minSourcesCount||null,r.multiGraphAggregationMaxResultValueRatio=i.multigraph.aggregation.maxResultValueRatio||null,r.multiGraphAggregationMaxResultValue=i.multigraph.aggregation.maxResultValue||null)),r}return i(e,t),e}(ht),yt=function(){function e(t){this.client=t}return e.prototype.create=function(e,n){return o(this,void 0,void 0,function(){var i,r;return s(this,function(o){switch(o.label){case 0:return i=new t.UrlUtil.TargomoUrl(this.client).host(this.client.config.statisticsUrl).part("multigraph").key().toString(),r=new dt(this.client,e,n),[4,f(this.client).fetchCachedData(n.useClientCache,i,"POST",r,{Accept:"text/plain"})];case 1:return[2,o.sent()]}})})},e.prototype.info=function(e){return o(this,void 0,void 0,function(){var n,i;return s(this,function(r){switch(r.label){case 0:return n=new t.UrlUtil.TargomoUrl(this.client).host(this.client.config.statisticsUrl).part("multigraph/"+e).key().toString(),[4,f(this.client).fetch(n,"GET")];case 1:return(i=r.sent()).boundingBoxNorthEast&&i.boundingBoxSouthWest&&(i.boundingBox={northEast:{lat:i.boundingBoxNorthEast.y,lng:i.boundingBoxNorthEast.x},southWest:{lat:i.boundingBoxSouthWest.y,lng:i.boundingBoxSouthWest.x}},delete i.boundingBoxNorthEast,delete i.boundingBoxSouthWest),[2,i]}})})},e.prototype.redo=function(e){return o(this,void 0,void 0,function(){var n;return s(this,function(i){switch(i.label){case 0:return n=new t.UrlUtil.TargomoUrl(this.client).host(this.client.config.statisticsUrl).part("multigraph/"+e+"/update").key().toString(),[4,f(this.client).fetch(n,"PATCH")];case 1:return[2,i.sent()]}})})},e}(),gt=function(){function e(t){this.client=t}return e.prototype.fetch=function(e,n,i,r){return o(this,void 0,void 0,function(){var o,a;return s(this,function(s){switch(s.label){case 0:return o=new t.UrlUtil.TargomoUrl(this.client).host(this.client.config.fleetsUrl).version().part("/api/key-auth/optimizations").key().toString(),a=this._createPayload(this.client,e,n,i,r),[4,f(this.client).fetch(o,"POST",a)];case 1:return[2,s.sent()]}})})},e.prototype._createPayload=function(t,e,n,i,r){return{optimizationTime:r.optimizationTime,optimizationAlgorithm:r.optimizationAlgorithm,optimizationMetadata:{costMatrixSource:r.costMatrixSource,geojsonCreation:r.geojsonCreation,unimprovedWaitingTime:r.unimprovedWaitingTime,filterOrdersWithMissedDeadline:r.filterOrdersWithMissedDeadline,filterOrdersOutsideOfValidWorkingHours:r.filterOrdersOutsideOfValidWorkingHours,prohibitFilteringOfOrdersWithDeadlinesEarlierEqualsThan:r.prohibitFilteringOfOrdersWithDeadlinesEarlierEqualsThan,secondsToPenaltyRatioForDeadlineMissed:r.secondsToPenaltyRatioForDeadlineMissed,secondsToPenaltyRatioForOutOfWorkingHours:r.secondsToPenaltyRatioForOutOfWorkingHours,timeConstraintPenaltyToTravelCostRatio:r.timeConstraintPenaltyToTravelCostRatio,longestTourPenaltyFactor:r.longestTourPenaltyFactor,nonParallelOrdersByTags:r.nonParallelOrdersByTags,travelOptions:{travelType:r.travelType,serviceKey:t.serviceKey,serviceUrl:t.serviceUrl,travelTimeFactors:r.travelTimeFactors,fallbackServiceUrl:"",edgeWeight:r.edgeWeight,maxEdgeWeight:r.maxEdgeWeight,elevation:r.elevation,rushHour:r.rushHour}},stores:e,transports:i,orders:n}},e}(),mt=function(){function e(t){this.client=t,this.basemapsLookup={Bright:"osm-bright-gl-style",Light:"positron-gl-style","Light No-Labels":"positron-nolabels-gl-style",Dark:"dark-matter-gl-style","Dark No-Labels":"dark-matter-nolabels-gl-style",Gray:"gray-gl-style","Gray No-Labels":"gray-nolabels-gl-style","Light blue":"blueberry-gl-style","Dark blue":"fiord-color-gl-style","Dark blue No-Labels":"fiord-color-nolabels-gl-style",Basic:"klokantech-basic-gl-style",Toner:"toner-gl-style"}}return Object.defineProperty(e.prototype,"basemapNames",{get:function(){return Object.keys(this.basemapsLookup)},enumerable:!0,configurable:!0}),e.prototype.getGLStyleURL=function(e){if(!e||!this.basemapsLookup[e])throw new Error("valid style name required to access Targomo basemap");return new t.UrlUtil.TargomoUrl(this.client).host(this.client.config.basemapsUrl).part(this.basemapsLookup[e]+".json").params({key:this.client.serviceKey}).toString()},e}(),vt=function(t,e){this.esri=t,this.photon=e},bt=function(){function n(t,n,i){if(this.serviceKey=n,!t)throw new TypeError("Region parameter is missing");this.config=new e(i),t.includes("http")||t.includes("localhost")||t.includes("/")?this.serviceUrl=t:this.serviceUrl="https://api.targomo.com/"+t+"/",this.pois=new A(this),this.statistics=new ft(this),this.reachability=new at(this),this.optimizations=new O(this),this.geocoding=new vt(new m,new v(this)),this.polygons=new rt(this),this.routes=new ct(this),this.similarity=new lt(this),this.benchmarks=new g(this),this.statefulMultigraph=new yt(this),this.multigraph=new E(this),this.basemaps=new mt(this),this.fleets=new gt(this)}return Object.defineProperty(n.prototype,"endpoint",{get:function(){var t=this.serviceUrl.split("/").filter(function(t){return!!t});return t[t.length-1]},enumerable:!0,configurable:!0}),n.prototype.metadata=function(){return o(this,void 0,void 0,function(){var e;return s(this,function(n){switch(n.label){case 0:return e=new t.UrlUtil.TargomoUrl(this).part(this.serviceUrl).version().part("/metadata/network").key().toString(),[4,f(this).fetch(e)];case 1:return[2,n.sent()]}})})},n}(),wt=K;t.geometry=wt,t.PointsOfInterestClient=A,t.ClientConfig=e,t.BenchmarksClient=g,t.GeocodeEsriClient=m,t.GeocodePhotonClient=v,t.MultigraphClient=E,t.OptimizationsClient=O,t.PolygonsClient=rt,t.PolygonArray=ot,t.ReachabilityClient=at,t.RoutesClient=ct,t.SimilarityClient=lt,t.StatisticsClient=ft,t.GeocodingClients=vt,t.TargomoClient=bt,t.FleetsClient=gt,t.LatLng=function(){},t.BoundingBox=function(){},t.TravelSpeedValues=function(){},t.StatisticValues=k,t.UseCacheRequestOptions=function(){},t.BaseRequestOptions=b,t.TravelRequestOptions=w,t.Route=J,t.RouteSegment=Z,t.StatisticsResult=Y,t.FpResult=function(){},t.OptimizationResult=U,t.StatisticsGeometryResult=X,t.RequestsUtil=p,t.requests=f,t.SimpleLRU=u,t.SimpleCache=c,Object.defineProperty(t,"__esModule",{value:!0})}(e)}]);
//# sourceMappingURL=targomo-leaflet-prod.js.map